define("kotenei/autoComplete",["jquery"],function(t){var e={LEFT:37,UP:38,RIGHT:39,DOWN:40,TAB:9,ENTER:13},i=function(e,i){this.$element=e,this.options=t.extend({},{url:null,zIndex:1e3,data:[],max:10,width:null,height:null,isBottom:!0,hightLight:!1,formatItem:function(t){return t},callback:{setValue:null}},i),this.tpl='<div class="k-autocomplete"></div>',this.active=0,this.init()};return i.prototype.init=function(){var i=this;this.$listBox=t(this.tpl).hide().appendTo(document.body),this.data=this.options.data||[],this.$element.on("keyup",function(s){var o=t(this),n=t.trim(o.val());switch(i.cache?i.cache!=n&&(i.cache=n,i.search(n),i.active=0):(i.cache=n,i.search(n),i.active=0),s.keyCode){case e.UP:case e.LEFT:s.preventDefault(),i.prev();break;case e.DOWN:case e.RIGHT:i.next();break;case e.ENTER:case e.TAB:i.select()}}),this.$listBox.on("click","li",function(){var e=t(this).text();if(i.$element.val(e).focus(),t.isFunction(i.options.callback.setValue)){var s=i.getItem(e);i.options.callback.setValue(s)}}),t(document).on("click.autocomplete",function(){i.hide()}),t(window).on("resize.autocomplete",function(){i.setCss()})},i.prototype.search=function(e){var i=this;if(this.options.url)t.ajax({mode:"abort",type:"GET",url:this.options.url,cache:!1,data:{keyword:e}}).done(function(t){if(t&&t instanceof Array){var s;i.data=t,s=i.getData(e),i.build(e,s),i.show()}});else if(this.options.proxy)this.options.proxy(e,function(t){i.data=t,t=i.getData(e),i.build(e,t),i.show()});else{var s=this.getData(e);this.build(e,s),this.show()}},i.prototype.getData=function(t){this.cacheData=[];var e=[],i=0;if(0===t.length)return e;for(var s,o=0;o<this.data.length;o++)if(s=this.options.formatItem(this.data[o]),s.toLowerCase().indexOf(t.toLowerCase())>=0){if(this.cacheData.push(this.data[o]),e.push(s),i===this.options.max-1)break;i++}return e},i.prototype.build=function(t,e){if(this.$listBox.find("ul").remove(),this.$listItem=null,0!==e.length){for(var i="<ul>",s=0;s<e.length;s++)i+='<li class="'+(0==s?"active":"")+'">'+this.hightLight(t,e[s])+"</li>";i+="</ul>",this.$listBox.append(i),this.$list=this.$listBox.find("ul"),this.$listItem=this.$listBox.find("li")}},i.prototype.hightLight=function(t,e){if(this.options.hightLight){var i=new RegExp("("+t+")","ig");return e=e.replace(i,"<strong>$1</strong>")}return e},i.prototype.show=function(){return this.hasItem()?(this.setCss(),void this.$listBox.show()):void this.hide()},i.prototype.getCss=function(){var t={left:this.$element.offset().left,top:this.$element.outerHeight()+this.$element.offset().top,width:this.options.width||this.$element.outerWidth()};return this.options.isBottom||(t.top=this.$element.offset().top-this.$listBox.outerHeight(!0)),t},i.prototype.setCss=function(){this.$list.css("max-height",this.options.height||"auto");var t=this.getCss();this.$listBox.css(t)},i.prototype.hide=function(){this.$listBox.hide()},i.prototype.prev=function(){this.moveSelect(-1)},i.prototype.next=function(){this.moveSelect(1)},i.prototype.hasItem=function(){return this.$listItem&&this.$listItem.length>0},i.prototype.moveSelect=function(t){if(this.hasItem()){this.active+=t,this.active<0?this.active=this.$listItem.length-1:this.active>this.$listItem.length-1&&(this.active=0);var e=this.$listItem.removeClass("active").eq(this.active).addClass("active"),i=0;this.$listItem.each(function(){i+=this.offsetHeight});var s=this.$list.scrollTop(),o=this.$list[0].clientHeight,n=e.height(),h=e.position().top;h>o?this.$list.scrollTop(h+n-o+s):0>h&&this.$list.scrollTop(s+h)}},i.prototype.select=function(){var e=this.$listBox.find("li.active"),i=e.text();if(this.$element.val(i),this.hide(),t.isFunction(this.options.callback.setValue)){var s=this.getItem(i);this.options.callback.setValue(s)}},i.prototype.getItem=function(t){var e=this.cacheData;if(e&&0!==e.length){for(var i,s=0;s<e.length;s++)if(i=this.options.formatItem(e[s]),t===i)return e[s];return null}},i}),define("kotenei/cache",[],function(){var t={},e=window.localStorage;return t.set=function(i,s,o){if(!s)return void t.remove(i);var n;/^[1-9]\d*$/.test(o)&&(n=(new Date).getTime()+1e3*parseInt(o));var h={value:s,expired:n};e.setItem(i,JSON.stringify(h))},t.get=function(i){var s=e.getItem(i),o=null;return s&&(s=JSON.parse(s),s.expired&&(new Date).getTime()>s.expired?t.remove(i):o=s.value),o},t.remove=function(t){e.removeItem(t)},t.clear=function(){e.clear()},t}),define("kotenei/clipZoom",["jquery","kotenei/dragdrop"],function(t,e){var i=function(e,i){this.$element=e,this.options=t.extend({},{imgUrl:"",scale:!0,width:400,height:300,selectorWidth:120,selectorHeight:100,callback:{clip:null}},i),this.$selector=e.find(".selector"),this.$clipZoomBox=e.find(".k-clipZoom-Box").width(this.options.width).height(this.options.height),this.$container=this.$clipZoomBox.find(".container"),this.$mainImg=this.$container.find("img"),this.$viewBox=e.find(".view-box"),this.$viewImg=this.$viewBox.find("img"),this.$resultBox=e.find(".result-box"),this.$resultImg=this.$resultBox.find("img"),this.init()};return i.prototype.init=function(){var t=this;this.$selector.width(this.options.selectorWidth).height(this.options.selectorHeight),this.$viewBox.width(this.options.selectorWidth).height(this.options.selectorHeight),this.selectorDnd=new e({$layer:this.$selector,$range:this.$clipZoomBox,resizable:!0,scale:this.options.scale,callback:{resize:function(){t.setPreview()},move:function(){t.setPreview()}}}),this.imgLoad(),this.eventBind()},i.prototype.eventBind=function(){var t=this;this.$element.on("click",'[role="clip"]',function(){t.clip()}).on("click",'[role="center"]',function(){t.center()}).on("click",'[role="reset"]',function(){t.reset()}).on("click",'[role="plus"]',function(){t.zoom(!0)}).on("click",'[role="minus"]',function(){t.zoom(!1)})},i.prototype.setImgSize=function(t,e){this.$mainImg.width(t).height(e)},i.prototype.imgLoad=function(){var t=this,i=new Image;i.onload=function(){var s=t.getSize(i.width,i.height,t.options.width);i.width<t.options.width&&(s.width=i.width,s.height=i.height),t.$container.width(s.width).height(s.height).css({left:0,top:0}),t.$mainImg.attr("src",t.options.imgUrl).width(s.width).height(s.height),t.$viewImg.attr("src",t.options.imgUrl).width(s.width).height(s.height),t.resetSize={width:s.width,height:s.height,left:0,top:0},t.containerDnd=new e({$layer:t.$container,$range:t.$clipZoomBox,resizable:!0,boundary:!0,scale:!0,callback:{resize:function(e){t.setImgSize(e.width,e.height),t.setPreview()},move:function(){t.setPreview()}}}),t.setPreview()},i.onerr=function(){alert("图片加载失败")},i.src=this.options.imgUrl},i.prototype.getSize=function(t,e,i){var s;return t>=e?(s=t/e,e=i/s):(s=e/t,e=i*s),{width:parseInt(i),height:parseInt(e)}},i.prototype.zoom=function(t){var e,i=this.$container.width(),s=this.$container.height();e=t?i/.8:.8*i;var o=this.getSize(i,s,e);this.$container.width(o.width).height(o.height),this.$mainImg.width(o.width).height(o.height),this.$viewImg.width(o.width).height(o.height),this.setPreview()},i.prototype.clip=function(){var e={imgSource:this.options.imgUrl,imgWidth:this.$viewImg.width(),imgHeight:this.$viewImg.height(),imgX:Math.abs(this.$viewImg[0].style.marginLeft.replace("px",""))-this.$viewImg.position().left,imgY:Math.abs(this.$viewImg[0].style.marginTop.replace("px",""))-this.$viewImg.position().top,selectorX:this.$selector.position().left,selectorY:this.$selector.position().top,cutterWidth:this.options.selectorWidth,cutterHeight:this.options.selectorHeight};t.isFunction(this.options.callback.clip)&&this.options.callback.clip(e)},i.prototype.center=function(){var t=parseInt(this.$mainImg.width()),e=parseInt(this.$mainImg.height()),i=parseInt(this.$selector.width()),s=parseInt(this.$selector.height()),o=parseInt(this.options.width),n=parseInt(this.options.height),h=this.getSize(t,e,i);h.height<s&&(h.width=t/e*s,h.height=s),this.$mainImg.width(h.width).height(h.height),this.$viewImg.width(h.width).height(h.height),this.$container.width(h.width).height(h.height).css({top:(n-h.height)/2,left:(o-h.width)/2}),this.$selector.css({top:(n-s)/2,left:(o-i)/2}),this.setPreview()},i.prototype.reset=function(){this.$container.width(this.resetSize.width).height(this.resetSize.height).css({left:0,top:0}),this.$mainImg.width(this.resetSize.width).height(this.resetSize.height),this.$viewImg.width(this.resetSize.width).height(this.resetSize.height),this.setPreview()},i.prototype.setPreview=function(){{var t=this.options,e=this.getPreviewInfo(),i=t.selectorWidth,s=t.selectorHeight;e.viewPortWidth,e.viewPortHeight}if(e.selectorWidth>0){var o=i/e.selectorWidth,n=s/e.selectorHeight;this.$viewImg.css({width:Math.round(o*e.imgWidth),height:Math.round(n*e.imgHeight),left:Math.round(o*e.imgX),top:Math.round(n*e.imgY),marginLeft:-Math.round(o*e.selectorX),marginTop:-Math.round(n*e.selectorY)})}},i.prototype.getPreviewInfo=function(){var t=this.options;return{imgWidth:this.$mainImg.width(),imgHeight:this.$mainImg.height(),imgX:this.$container.position().left,imgY:this.$container.position().top,selectorWidth:this.$selector.width(),selectorHeight:this.$selector.height(),selectorX:this.$selector.position().left,selectorY:this.$selector.position().top,viewPortWidth:t.width,viewPortHeight:t.height}},i}),define("kotenei/datepicker",["jquery"],function(t){var e={months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一","十二"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["周日","周一","周二","周三","周四","周五","周六"],daysMin:["日","一","二","三","四","五","六"]},i=function(e,i){var s=new Date;this.$element=e,this.options=t.extend({},{appendTo:t(document.body),showTime:!1,year:{min:1900,max:2050},format:"yyyy-mm-dd"},i),this.year=s.getFullYear(),this.month=s.getMonth()+1,this.day=s.getDate(),this.index=0,this.isSetTime=!1,this.selectDay=!1,this.init(),this.eventBind()};return i.prototype.init=function(){this.$element.attr("readonly","readonly"),this.createPanel(),this.$datepicker.appendTo(this.options.appendTo)},i.prototype.eventBind=function(){var e=this;this.$element.on("click.datepicker",function(){return e.show(),!1}),this.$datepicker.on("click",function(i){var s=i.target,o=t(s);return"year"===s.id||"month"===s.id||o.parents(".year-box:eq(0)").length>0||o.parents(".month-box:eq(0)").length>0?!1:(e.yearBoxToggle(!1),e.monthBoxToggle(!1),e.timePanelHide(),!1)}).on("click",'[role="prev"]',function(){e.options;e.month--,e.prevToggle(),e.month<1&&(e.month=12,e.year--),e.$next.show(),e.createDays()}).on("click",'[role="next"]',function(){e.options;e.month++,e.nextToggle(),e.month>12&&(e.month=1,e.year++),e.$prev.show(),e.createDays()}).on("click","#month",function(){e.monthBoxToggle(!0),e.yearBoxToggle(!1)}).on("click",".month-box li",function(){var i=t(this),s=(i.text(),i.attr("data-month"));e.month=parseInt(t.trim(s)),e.monthBoxToggle(!1),e.createDays(),e.prevToggle(),e.nextToggle()}).on("click","#year",function(){e.yearBoxToggle(!0),e.monthBoxToggle(!1)}).on("click",".year-box li",function(){var i=t(this),s=parseInt(t.trim(i.text()));i.hasClass("cur")||(e.$yearBox.find("li").removeClass("cur"),i.addClass("cur"),e.year=parseInt(s),e.createDays(),e.yearBoxToggle(!1),e.prevToggle(),e.nextToggle())}).on("click",'[role="yearPrev"]',function(){0!=e.index&&(e.index--,e.toCurYearPanel())}).on("click",'[role="yearNext"]',function(){e.index!=e.$yearItems.length-1&&(e.index++,e.toCurYearPanel())}).on("click",'[role="clear"]',function(){e.$element.val(""),e.isSetTime=!1,e.setTodayInfo(),e.createDays(),e.setViewInfo(),e.hide()}).on("click",'[role="today"]',function(){e.setTodayInfo(),e.createDays(),e.hide(),e.set(!0),e.setTime()}).on("click","tbody td",function(){var i=t(this),s=i.attr("data-year"),o=i.attr("data-month"),n=i.attr("data-day"),s=parseInt(s),o=parseInt(o),n=parseInt(n);e.year=s,e.month=o,e.day=n,e.createDays(),e.options.showTime||(e.set(),e.hide())}).on("click","span.hours",function(){return e.setTimePanelPosition(t(this),e.$hoursBox),!1}).on("click","span.minutes",function(){return e.setTimePanelPosition(t(this),e.$minutesBox),!1}).on("click","span.seconds",function(){return e.setTimePanelPosition(t(this),e.$secondsBox),!1}).on("click",".time-box li",function(){var i=t(this),s=i.attr("data-value"),o=i.text(),n=i.attr("data-target");switch(n){case"hours":e.hours=s,e.$hours.text(o);break;case"minutes":e.minutes=s,e.$minutes.text(o);break;case"seconds":e.seconds=s,e.$seconds.text(o)}}).on("click",'[role="confirm"]',function(){var t=e.$datepicker.find("td span.active"),i=t.parent(),s=i.attr("data-year"),o=i.attr("data-month"),n=i.attr("data-day");e.isSetTime=!0,e.year=Number(s),e.month=Number(o),e.day=Number(n),e.hours=Number(e.$hours.text()),e.minutes=Number(e.$minutes.text()),e.seconds=Number(e.$seconds.text()),e.set(),e.hide()}),t(document).on("click.datepicker",function(){e.hide()})},i.prototype.createPanel=function(){var i=[];i.push('<div class="k-datepicker">'),i.push('<div class="container">'),i.push("<table>"),i.push("<thead>"),i.push("<tr>"),i.push('<th class="prev"  style="width:28px;"><i class="fa fa-chevron-left" role="prev"></i></th>'),i.push('<th colspan="5">'),i.push('<span id="year" style="margin-right:20px;">'+this.year+"</span>"),i.push('<span id="month">'+e.months[this.month-1]+"</span>"),i.push("</th>"),i.push('<th class="next"  style="width:28px;"><i class="fa fa-chevron-right" role="next"></i></th>'),i.push("</tr>"),i.push("<tr>");for(var s=0;s<e.daysMin.length;s++)i.push("<th>"+e.daysMin[s]+"</th>");i.push("</tr>"),i.push("</thead>"),i.push("<tbody>"),i.push("</tbody>"),i.push("</table>"),i.push(this.getYearBox()),i.push(this.getMonthBox()),i.push(this.getTimeBox()),i.push('<div style="text-align:right">'),i.push('<input type="button" value="清空" role="clear" />&nbsp;'),i.push('<input type="button" value="今天" role="today" />&nbsp;'),this.options.showTime&&i.push('<input type="button" value="确定" role="confirm" />&nbsp;'),i.push("</div>"),i.push("</div>"),i.push("</div>"),this.$datepicker=t(i.join("")),this.$year=this.$datepicker.find("#year"),this.$yearBox=this.$datepicker.find(".year-box"),this.$yearItems=this.$yearBox.find("ul"),this.$month=this.$datepicker.find("#month"),this.$monthBox=this.$datepicker.find(".month-box"),this.$timeBox=this.$datepicker.find(".time-box"),this.$hours=this.$timeBox.find("span.hours"),this.$minutes=this.$timeBox.find("span.minutes"),this.$seconds=this.$timeBox.find("span.seconds"),this.$hoursBox=this.$timeBox.find(".hours-box"),this.$minutesBox=this.$timeBox.find(".minutes-box"),this.$secondsBox=this.$timeBox.find(".seconds-box"),this.$prev=this.$datepicker.find("th.prev i"),this.$next=this.$datepicker.find("th.next i"),this.index=this.$yearItems.find("li.cur").parent().show().index(),this.createDays(),this.options.showTime?this.$timeBox.show():this.$timeBox.hide()},i.prototype.getYearBox=function(){var t,e=[],i=[],s=1,o=1,n=this.options.year.max-this.options.year.min+1,h=this.options.year.min-1;t=n%10==0?n/10:parseInt(n/10)+1;for(var r=1;t>=r;r++){i.push("<ul>");for(var a=s;n>=a;a++){if(h+=1,i.push('<li id="li_'+h+'" class="'+(this.year==h?"cur":"")+'">'+h+"</li>"),s++,o%10===0){o=1;break}o++}i.push("</ul>")}return e.push('<div class="year-box">'),e.push('<div class="year-box-container">'),e.push(i.join("")),e.push("</div>"),e.push('<div class="year-box-controls">'),e.push('<i class="fa fa-chevron-left" style="float:left;" role="yearPrev"></i>'),e.push('<i class="fa fa-chevron-right" style="float:right;" role="yearNext"></i>'),e.push("</div>"),e.push("</div>"),e.join("")},i.prototype.getMonthBox=function(){var t=[];t.push('<ul class="month-box">');for(var i=0;i<e.months.length;i++)t.push('<li data-month="'+(i+1)+'">'+e.months[i]+"</li>");return t.push("</ul>"),t.join("")},i.prototype.getTimeBox=function(){html=[],date=new Date,html.push('<div class="time-box">'),html.push('<ul class="hours-box">');for(var t=0;24>t;t++)html.push('<li data-target="hours" data-value='+t+">"+this.supStr(t)+"</li>");html.push("</ul>"),html.push('<ul class="minutes-box">');for(var t=0;55>=t;t+=5)html.push('<li data-target="minutes" data-value='+t+">"+this.supStr(t)+"</li>");html.push("</ul>"),html.push('<ul class="seconds-box">');for(var t=0;55>=t;t+=15)html.push('<li data-target="seconds" data-value='+t+">"+this.supStr(t)+"</li>");return html.push("</ul>"),html.push('<div class="time-box-container">'),html.push("<span>时间：</span>"),html.push("<div >"),html.push('<span class="hours">'+date.getHours()+"</span>"),html.push("<span>:</span>"),html.push('<span class="minutes">'+date.getMinutes()+"</span>"),html.push("<span>:</span>"),html.push('<span class="seconds">'+date.getSeconds()+"</span>"),html.push("</div>"),html.push("</div>"),html.push("</div>"),html.join("")},i.prototype.createDays=function(t,e,i){for(var t=t||this.year,e=e||this.month,i=i||this.day,s=this.getMonthLastDay(t,e),o=this.getMonthLastDay(t,e-1),n=new Date(t,e-1,1).getDay(),h=new Array(42),r=[],a=42-s,l=0,d=n;s>l;l++,d++)h[d]={year:t,month:e,day:l+1,tdClass:""},l+1==s&&(a=42-d);for(var l=n,d=0;l>=1;l--,d++)h[d]=1==e?{year:t-1,month:12,day:o-l+1,tdClass:"old"}:{year:t,month:e-1,day:o-l+1,tdClass:"old"};for(var l=42-a+1,d=1;42>l;l++,d++)h[l]=12==e?{year:t+1,month:1,day:d,tdClass:"new"}:{year:t,month:e+1,day:d,tdClass:"new"};for(var c=0,p=0,l=0;6>l;l++){r.push("<tr>");for(var u,f,d=c;42>d;d++)if(u=h[d],f=u.year==t&&u.month==e&&this.day==u.day?"today":"",r.push('<td id="'+u.year+"_"+u.month+"_"+u.day+'" class="'+u.tdClass+"   "+f+'  " data-year="'+u.year+'" data-month="'+u.month+'" data-day="'+u.day+'"><span>'+u.day+"</span></td>"),c++,p++,7==p){p=0;break}r.push("</tr>")}this.$datepicker.find("tbody").html(r.join("")),this.setViewInfo(t,e,i)},i.prototype.getMonthLastDay=function(t,e){return new Date(new Date(t,e,1).getTime()-864e5).getDate()},i.prototype.yearBoxToggle=function(t){var e={left:this.$year.position().left,top:this.$year.position().top+this.$year.outerHeight()-2};t?(this.$year.addClass("selected"),this.$yearBox.show().css(e)):(this.$year.removeClass("selected"),this.$yearBox.hide())},i.prototype.monthBoxToggle=function(t){var e={left:this.$month.position().left,top:this.$month.position().top+this.$month.outerHeight()-2};t?(this.$month.addClass("selected"),this.$monthBox.show().css(e)):(this.$month.removeClass("selected"),this.$monthBox.hide())},i.prototype.timePanelHide=function(){this.$hoursBox.hide(),this.$minutesBox.hide(),this.$secondsBox.hide()},i.prototype.toCurYearPanel=function(){this.$yearItems.hide().eq(this.index).show()},i.prototype.prevToggle=function(){this.year===this.options.year.min&&1==this.month?this.$prev.hide():this.$prev.show()},i.prototype.nextToggle=function(){this.year==this.options.year.max&&12==this.month?this.$next.hide():this.$next.show()},i.prototype.showInit=function(){var e=t.trim(this.$element.val());if(0!==e.length){var i=/(\d{4}).{1}(\d{2}).{1}(\d{2})/,s=/(\d{2}):(\d{2}):(\d{2})/,o=e.match(i),n=e.match(s);o&&o.length>0&&(this.year=Number(o[1]),this.month=Number(o[2]),this.day=Number(o[3])),n&&n.length>0&&(this.hours=Number(n[1]),this.minutes=Number(n[2]),this.seconds=Number(n[3]))}},i.prototype.show=function(){t("div.k-datepicker").hide(),this.options.showTime&&!this.isSetTime?(this.setTodayInfo(),this.createDays(),this.setViewInfo(),this.setTime()):(this.showInit(),this.createDays(),this.setViewInfo()),this.$datepicker.show().css({left:this.$element.position().left,top:this.$element.position().top+this.$element[0].offsetHeight+2})},i.prototype.hide=function(){this.$datepicker.hide(),this.yearBoxToggle(!1),this.monthBoxToggle(!1),this.timePanelHide()},i.prototype.setTimePanelPosition=function(t,e){var i={left:t.position().left-1,top:t.position().top-e.outerHeight()};e.show().css(i).siblings("ul").hide()},i.prototype.setTodayInfo=function(){var t=new Date;this.year=t.getFullYear(),this.month=t.getMonth()+1,this.day=t.getDate(),this.hours=t.getHours(),this.minutes=t.getMinutes(),this.seconds=t.getSeconds()},i.prototype.setViewInfo=function(t,i,s){var t=t||this.year,i=i||this.month,s=s||this.day;this.prevToggle(),this.nextToggle(),this.$year.html(t),this.$month.html(e.months[i-1]),this.$yearBox.find("li").removeClass("cur"),this.$yearBox.find("#li_"+t).addClass("cur").parent().show().siblings().hide(),this.$datepicker.find("tbody td span").removeClass("active"),this.$datepicker.find("#"+t+"_"+i+"_"+s).children().addClass("active"),this.index=this.$yearItems.find("li.cur").parent().show().index()},i.prototype.setTime=function(){var t=new Date,e=t.getHours(),i=t.getMinutes(),s=t.getSeconds();this.$hours.text(this.supStr(this.isSetTime?this.hours||e:e)),this.$minutes.text(this.supStr(this.isSetTime?this.minutes||i:i)),this.$seconds.text(this.supStr(this.isSetTime?this.seconds||s:s))},i.prototype.set=function(t){t=t||!1,this.isSetTime=!0;var e=new Date,i=t?e.getFullYear():this.year,s=t?e.getMonth():this.month-1,o=t?e.getDate():this.day,n=t||!this.options.showTime?e.getHours():this.hours||e.getHours(),h=t||!this.options.showTime?e.getMinutes():this.minutes||e.getMinutes(),r=t||!this.options.showTime?e.getSeconds():this.seconds||e.getSeconds(),a=new Date(i,s,o,n,h,r),l=this.format(a);this.$element.val(l).focus().blur()},i.prototype.format=function(t){t=t||new Date;var e=this.options.format.replace(/"/g,""),i={"y+":t.getFullYear(),"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var s in i)if(new RegExp("("+s+")").test(e)){var o=i[s];e=e.replace(RegExp.$1,1==o.toString().length?"0"+o.toString():o)}return e},i.prototype.supStr=function(t){return t=String(t),1===t.length?"0"+t:t},i.Global=function(e){e=e||t(document.body).find('input[data-module="datepicker"]'),e.each(function(){var e=t(this),s=e.attr("data-format"),o=e.attr("data-showTime");o=o?"true"==o:!1,e.data("datepicker",new i(e,{format:s,showTime:o}))})},i}),define("kotenei/dragdrop",["jquery"],function(t){var e=function(e){this.options=t.extend({},{$layer:null,$handle:null,$range:null,direction:"",resizable:!1,scale:!1,boundary:!1,minWidth:100,callback:{start:t.noop,move:t.noop,stop:t.noop,resize:t.noop}},e),this.$layer=e.$layer,this.$handle=e.$handle,this.$range=e.$range,this.$window=t(window),this.$document=t(document),this.isResize=!1,this.moving=!1,this.offset={x:0,y:0},this.originalCoord={x:0,y:0},this.resizeParams={left:0,top:0,width:0,height:0,type:"bottomRight"},this.init()};return e.prototype.init=function(){this.$layer&&(this.$range&&this.$range.css("position","relative"),this.$handle=this.$handle||this.$layer,this.$layer.css({cursor:"move",position:"absolute"}),this.options.resizable&&(this.$layer.append('<span class="k-resizable k-resizable-topLeft" data-type="topLeft"></span>'),this.$layer.append('<span class="k-resizable k-resizable-topRight" data-type="topRight"></span>'),this.$layer.append('<span class="k-resizable k-resizable-bottomLeft" data-type="bottomLeft"></span>'),this.$layer.append('<span class="k-resizable k-resizable-bottomRight" data-type="bottomRight"></span>'),this.options.scale||(this.$layer.append('<span class="k-resizable k-resizable-topCenter" data-type="topCenter"></span>'),this.$layer.append('<span class="k-resizable k-resizable-leftCenter" data-type="leftCenter"></span>'),this.$layer.append('<span class="k-resizable k-resizable-rightCenter" data-type="rightCenter"></span>'),this.$layer.append('<span class="k-resizable k-resizable-bottomCenter" data-type="bottomCenter"></span>'))),this.setMinSize(),this.eventBind())},e.prototype.setMinSize=function(){var t,e=this.$layer.outerWidth(),i=this.$layer.outerHeight();this.minWidth=this.options.minWidth||e,e>=i?(t=e/i,this.minHeight=this.minWidth/t):(t=i/e,this.minHeight=this.minWidth*t)},e.prototype.eventBind=function(){var e=this;this.$handle.on("mousedown",function(t){t.stopPropagation(),t.preventDefault(),e.start(t),document.onselectstart=function(){return!1}}).on("mousedown",".k-resizable",function(){e.isResize=!0,e.resizeParams.type=t(this).attr("data-type"),e.resizeParams.left=parseInt(e.$layer.position().left),e.resizeParams.top=parseInt(e.$layer.position().top),e.resizeParams.width=parseInt(e.$layer.outerWidth()),e.resizeParams.height=parseInt(e.$layer.outerHeight()),e.resizeParams.ratio=e.resizeParams.width>=e.resizeParams.height?e.resizeParams.width/e.resizeParams.height:e.resizeParams.height/e.resizeParams.width})},e.prototype.start=function(e){var i=this;this.$document.on("mousemove",function(t){i.isMoving&&(i.isResize?i.resize(t):i.move(t))}).on("mouseup",function(e){i.stop(e),t(this).off()});var s=this.getMouseCoord(e);return this.offset.x=s.x-this.$layer.position().left,this.offset.y=s.y-this.$layer.position().top,this.originalCoord.x=s.x,this.originalCoord.y=s.y,this.$handle[0].setCapture&&this.$handle[0].setCapture(),this.isMoving=!0,t.isFunction(this.options.callback.start)&&this.options.callback.start(e,this.$layer),!1},e.prototype.move=function(e){var i,s,o=this.getMouseCoord(e),n={x:o.x-this.offset.x,y:o.y-this.offset.y},h=this.$range;h?(i=h.width()-this.$layer.outerWidth(!0),s=h.height()-this.$layer.outerHeight(!0),this.options.boundary||(n.x<0&&(n.x=0),n.y<0&&(n.y=0),n.x>i&&(n.x=i),n.y>s&&(n.y=s))):(i=this.$window.width()-this.$layer.outerWidth()+this.$document.scrollLeft(),s=this.$window.height()-this.$layer.outerHeight()+this.$document.scrollTop(),n.x<0&&(n.x=0),n.y<0&&(n.y=0),n.x>i&&(n.x=i),n.y>s&&(n.y=s)),this.setPosition(n),t.isFunction(this.options.callback.move)&&this.options.callback.move(n)},e.prototype.resize=function(e){var i,s,o=this.getMouseCoord(e),n={x:o.x-this.offset.x,y:o.y-this.offset.y},h=(this.$layer,this.resizeParams),r={left:0,top:0,width:0,height:0},a=this.$range;switch(a?(i=a.width(),s=a.height()):(i=this.$window.width()+this.$document.scrollLeft(),s=this.$window.height()+this.$document.scrollTop()),this.resizeParams.type){case"topLeft":r.width=h.width+(h.left-n.x),r.width=r.width<this.minWidth?this.minWidth:r.width,r.height=this.getScaleHeight(r.width),r.top=h.top-(r.height-h.height),r.left=h.left-(r.width-h.width),r.left<0&&(r.left=0,r.width=h.width+h.left,r.height=this.getScaleHeight(r.width),r.top=h.top-(r.height-h.height)),r.top<0&&(r.top=0,r.height=h.height+h.top,r.width=this.getScaleWidth(r.height),r.left=h.left-(r.width-h.width));break;case"topRight":r.left=h.left,r.width=h.width-(this.originalCoord.x-o.x),r.width=r.width<this.minWidth?this.minWidth:r.width,r.height=this.getScaleHeight(r.width),r.width+r.left>=i&&(r.width=i-h.left,r.height=this.getScaleHeight(r.width)),r.top=h.top-(r.height-h.height),r.top<0&&(r.top=0,r.height=h.height+h.top,r.width=this.getScaleWidth(r.height));break;case"leftCenter":r.top=h.top,r.height=h.height,n.x<=0?(r.left=0,r.width=h.width+h.left):(r.left=n.x,r.width=h.width+(this.originalCoord.x-o.x)),r.width<=this.minWidth&&(r.width=this.minWidth,r.left=h.left+(h.width-r.width));break;case"rightCenter":r.top=h.top,r.left=h.left,r.height=h.height,r.width=h.width-(this.originalCoord.x-o.x),r.width+r.left>=i&&(r.width=i-h.left),r.width<=this.minWidth&&(r.width=this.minWidth);break;case"topCenter":r.top=n.y,r.left=h.left,r.width=h.width,r.height=h.height+(this.originalCoord.y-o.y),n.y<0&&(r.top=0,r.height=h.height+h.top),r.height<=this.minHeight&&(r.height=this.minHeight,r.top=h.top+(h.height-r.height));break;case"bottomCenter":r.top=h.top,r.left=h.left,r.width=h.width,r.height=h.height-(this.originalCoord.y-o.y),r.height+r.top>=s&&(r.height=s-h.top),r.height<=this.minHeight&&(r.height=this.minHeight);break;case"bottomLeft":r.top=h.top,r.width=h.width+(this.originalCoord.x-o.x),r.width=r.width<this.minWidth?this.minWidth:r.width,r.height=this.getScaleHeight(r.width),r.left=h.left-(r.width-h.width),r.left<=0&&(r.left=0,r.width=h.width+h.left,r.height=this.getScaleHeight(r.width)),r.height+r.top>=s&&(r.height=s-r.top,r.width=this.getScaleWidth(r.height),r.left=h.left-(r.width-h.width));break;case"bottomRight":r.top=h.top,r.left=h.left,r.width=h.width-(this.originalCoord.x-o.x),r.width=r.width<this.minWidth?this.minWidth:r.width,r.height=this.getScaleHeight(r.width),r.width+r.left>=i&&(r.width=i-h.left,r.height=this.getScaleHeight(r.width)),r.top+r.height>=s&&(r.height=s-r.top,r.width=this.getScaleWidth(r.height))}this.$layer.css(r),t.isFunction(this.options.callback.resize)&&this.options.callback.resize(r)},e.prototype.getScaleWidth=function(t,e){return e=e||this.resizeParams.ratio,this.resizeParams.width>=this.resizeParams.height?t*e:t/e},e.prototype.getScaleHeight=function(t,e){return e=e||this.resizeParams.ratio,this.resizeParams.width>=this.resizeParams.height?t/e:t*e},e.prototype.stop=function(e){this.isMoving=!1,this.isResize=!1,this.$handle[0].releaseCapture&&this.$handle[0].releaseCapture(),t.isFunction(this.options.callback.stop)&&this.options.callback.stop(e,this.$layer)},e.prototype.getMouseCoord=function(t){return{x:t.pageX||t.clientX+document.body.scrollLeft-document.body.clientLeft,y:t.pageY||t.clientY+document.body.scrollTop-document.body.clientTop}},e.prototype.setPosition=function(t){"h"===this.options.direction?this.$layer.css("left",t.x):"v"===this.options.direction?this.$layer.css("top",t.y):this.$layer.css({left:t.x,top:t.y})},e}),define("kotenei/dropdown",["jquery"],function(t){var e=t("body"),i=t(document),s=0,o=function(e,i){this.$soure=e,this.setting=t.extend({width:e.width(),height:e.height()},i||{}),e.data("widget",this),s++,this.id=s,this.nameSpace="dropdown_"+String(this.id),this.initDom()};return o.prototype.initDom=function(){var e=this.$soure.parent();this.$soure.css({visibility:"hidden"}),"static"===e.css("position")&&e.css({visibility:"relative"});var i=1;"auto"===this.$soure.css("zIndex")?this.$soure.css("zIndex",1):i=Number(this.$soure.css("zIndex")),this.$el=t('<div class="widget-dropbox"/>').css({width:this.setting.width,height:this.setting.height,zIndex:i+1}),this.$label=t('<div class="label"/>').css({width:this.setting.width-this.setting.height,height:this.setting.height,lineHeight:String(this.setting.height-4)+"px"}).appendTo(this.$el),this.$icon=t('<div class="ic">&#9660;</div>').css({width:this.setting.height,height:this.setting.height,lineHeight:String(this.setting.height)+"px"}).appendTo(this.$el),this.buildDrop(),this.$el.insertBefore(this.$soure),this.watch()},o.prototype.syncPosition=function(){this.$el.css(this.$soure.position())},o.prototype.setLabel=function(t){this.$label.text(t).attr("title",t)},o.prototype.getVal=function(){return this.$soure.val()},o.prototype.setVal=function(t){this.$soure.val(t).change()},o.prototype.buildDrop=function(){this.$drop&&this.$drop.remove(),this.$drop=t('<div class="widget-dropbox-drop"/>').css({width:this.setting.width}).hide();var i=[];this.$soure.find("option").each(function(){var e=t(this);i.push('<li data-val="'+e.val()+'">'+e.text()+"</li>")});var s=t("<ul>"+i.join("")+"</ul>");s.appendTo(this.$drop),this.$drop.appendTo(e),this.syncPosition(),this.sync()},o.prototype.sync=function(){var t=this.$soure.find("option:selected").text();if(!t){var e=this.$soure.find("option").eq(0);t=e.text(),this.setVal(e.val())}this.setLabel(t)},o.prototype.showDrop=function(){var e=this,s=e.$el.offset();e.$el.addClass("widget-dropbox-hover"),e.$drop.css({top:s.top+e.setting.height+2,left:s.left}).show(),i.on("click."+e.nameSpace,function(i){i.target!==e.$label[0]&&i.target!==e.$icon[0]&&i.target!==e.$drop[0]&&!1===t.contains(e.$drop[0],i.target)&&e.hideDrop()})},o.prototype.hideDrop=function(){var t=this;t.$drop.hide(),t.$el.removeClass("widget-dropbox-hover"),i.off("click."+t.nameSpace)},o.prototype.watch=function(){var e=this;this.$el.on("click",function(){e.showDrop()}),this.$drop.on("click","li",function(){var i=t(this);return e.setVal(i.data("val")),e.sync(),e.hideDrop(),!1})},o.prototype.reload=function(){this.buildDrop()},o}),define("kotenei/dropdownDatepicker",["jquery","kotenei/dropdown","kotenei/util","foundation-datepicker"],function(t,e,i){t.fn.fdatepicker.dates["zh-CN"]={days:["日","一","二","三","四","五","六","日"],daysShort:["日","一","二","三","四","五","六","日"],daysMin:["日","一","二","三","四","五","六","日"],months:["1 月","2 月","3 月","4 月","5 月","6 月","7 月","8 月","9 月","10 月","11 月","12 月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],today:"今天"};
var s=function(t,i){e.call(this,t,i)};return s.prototype=i.createProto(e.prototype),s.prototype.buildDrop=function(){if(!this.$drop){var e=this;e.$drop=t('<div class="widget-dropbox-drop"/>').css({width:242,height:252}).hide(),e.$el.fdatepicker(t.extend({format:"yyyy-mm-dd",language:"zh-CN"},e.setting)).on("changeDate",function(){var t=e.datepicker.getFormattedDate();e.setVal(t),e.setLabel(t)}),e.datepicker=e.$el.data("datepicker"),e.datepicker.picker.appendTo(e.$drop),e.$drop.appendTo(t("body")),e.syncPosition(),e.sync()}},s.prototype.watch=function(){var t=this;this.$el.on("click",function(){t.showDrop()})},s.prototype.sync=function(){var t=this.getVal();if(t)this.$el.data("date",t),this.datepicker.update(),this.setLabel(t);else{var e=this.$soure.attr("placeholder")||"选择日期";this.setLabel(e)}},s}),define("kotenei/highlight",["jquery"],function(t){var e={},i=t(document.body),s="k-highlight";return e.highlightHtml=function(e,s,o){t.isArray(e)&&(o=s,s=e,e=i);var n=this.highlightText(e.html(),s,o);e.html(n)},e.highlightText=function(e,i,o){if(!e||0===e.length)return"";if(e=this.highlightClean(e,o),o=o||s,!i)return e;if(t.isArray(i)||(i=[i]),1===i.length&&0===t.trim(i[0]).length)return e;for(var n=e.match(/[^<>]+|<(\/?)([A-Za-z]+)([^<>]*)>/g),h=0;h<n.length;h++)/<[^>]+>/.test(n[h])||0==t.trim(n[h]).length||(n[h]=n[h].replace(new RegExp("("+i.join("|")+")","ig"),'<mark class="'+o+'">$1</mark>'));return n.join("")},e.highlightClean=function(t,e){e=e||s;var i=new RegExp('<mark class="?'+e+'"?>(.*?)</mark>',"ig");return t=t.replace(i,"$1")},e}),define("kotenei/infiniteScroll",["jquery"],function(t){var e=function(e){var i=this;this.options=t.extend({},{$scrollElement:t(window),$watchElement:null,scrollDistance:.3,callback:t.noop},e),this.$scrollElement=this.options.$scrollElement,this.$watchElement=this.options.$watchElement,this.$watchElement&&(this.$scrollElement.on("scroll.infiniteScroll",function(){i.scroll()}),this.scroll())};return e.prototype.scroll=function(){var t=this.$scrollElement.height(),e=t+this.$scrollElement.scrollTop(),i=this.$watchElement.offset().top+this.$watchElement.height(),s=i-e,o=s<=t*this.options.scrollDistance;o&&this.options.callback()===!1&&this.destroy()},e.prototype.destroy=function(){this.$scrollElement.off("scroll.infiniteScroll")},e}),define("kotenei/lazyload",["jquery"],function(t){function e(e,i){this.$elements=e,this.options=t.extend({},{placeholder:null,$container:t(window),callback:t.noop},i),this.cache=[],this.init()}return e.prototype.init=function(){var e=this;this.$elements.each(function(){if("img"==this.nodeName.toLowerCase()){var i=t(this),s={};null!=e.options.placeholder&&(this.setAttribute("data-url",this.src),this.src=e.options.placeholder),this.getAttribute("data-url")&&(s.$elm=i,s.url=this.getAttribute("data-url"),e.cache.push(s))}}),0!==this.cache.length&&(this.count=this.cache.length,this.eventBind(),this.load())},e.prototype.eventBind=function(){this.options.$container.on("scroll.lazyload",t.proxy(this.load,this))},e.prototype.load=function(){var e=this,i=this.getPosition();this.count<=0||t.each(this.cache,function(t,s){{var o,n,h=s.$elm,r=s.url;s.tag}h&&(n=h.offset().top,o=[n-i.top,n-i.top+h.height()],(o[0]>=0&&o[0]<i.height||o[1]>0&&o[1]<=i.height)&&(!function(t,i){e.imgLoad(t,i,function(){t.hide().fadeIn(),e.callback(t)})}(h,r),s.$elm=null,e.count--))})},e.prototype.imgLoad=function(t,e,i){var s=new Image;s.onload=function(){t.attr("src",e),i()},s.onerror=function(){i()},s.src=e},e.prototype.getPosition=function(){var t,e={},i=this.options.$container,s=i.height();return t=i[0]===window?i.scrollTop():i.offset().top,e.height=s,e.top=t,e},e.prototype.callback=function(e){t.isFunction(this.options.callback)&&this.options.callback(e)},function(i,s){return i=i||t("img"),new e(i,s)}}),define("kotenei/loading",["jquery","spin"],function(t,e){var i,s=function(e){this.options=t.extend({},{lines:12,length:10,width:4,radius:14,corners:1,rotate:0,direction:1,color:"white",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"70px",left:"70px"},e),this.tpl='<div class="k-loading"></div>',this.init()};return s.prototype.init=function(){this.spinner=new e(this.options),this.$loading=t(this.tpl).appendTo(document.body).hide()},s.prototype.show=function(){this.spinner.spin(this.$loading.get(0)),this.$loading.fadeIn("fast")},s.prototype.hide=function(){this.$loading.hide(),this.spinner.stop()},s.show=function(){i||(i=new s),i.show()},s.hide=function(){i&&i.hide()},s}),define("kotenei/pager",["jquery"],function(t){var e=function(e,i){this.$element=e,this.options=t.extend({},{className:"k-pagination",onclick:t.noop},i),this.curPage=1,this.totalCount=0,this.pageSize=10,this.template='<div class="pager-box"></div>'};return e.prototype.init=function(){if(0!==this.totalCount){var e=this;this.$pager=t(this.template).append(this.build()).appendTo(this.$element),this.$pager.on("click","li",function(){var i=t(this),s=i.attr("data-page");i.hasClass("disabled")||i.hasClass("active")||(e.curPage=parseInt(s),e.$pager.html(e.build()),e.options.onclick(e.curPage))})}},e.prototype.build=function(){var t,e=this.getInfo(),i=[];i.push('<ul class="'+this.options.className+'">'),t=this.curPage>1?"":"disabled",i.push('<li class="'+t+'" data-page="'+e.pre+'" ><a href="javascript:void(0);">«</a></li>');for(var s=e.start;s<=e.end;s++)t=s===this.curPage?"active":"",i.push('<li class="'+t+'" data-page="'+s+'" ><a href="javascript:void(0);">'+s+"</a></li>");return t=this.curPage!==e.allPage?"":"disabled",i.push('<li class="'+t+'" data-page="'+e.next+'" ><a href="javascript:void(0);">»</a></li>'),i.push("</ul>"),i.join("")},e.prototype.getInfo=function(){var t,e,i,s,o;return o=parseInt(this.totalCount/this.pageSize),o=this.totalCount%this.pageSize!==0?o+1:o,o=0===o?1:o,t=this.curPage+2>o?o-4:this.curPage-2,e=this.curPage<4?5:this.curPage+2,1>t&&(t=1),e>o&&(e=o),i=this.curPage-1<1?1:this.curPage-1,s=this.curPage+1>o?o:this.curPage+1,{start:t,end:e,pre:i,next:s,allPage:o}},e}),define("kotenei/placeholder",["jquery"],function(t){function e(e){e.each(function(){var e=t(this),s=e.data("placeholder");if(void 0===s){var o=t.trim(e.attr("placeholder"));if(!o||0===o.length)return;s=new i(e),e.data("placeholder",s)}else s.setPosition()})}var i=function(t){this.$elm=t,this.type="placeholder",this.init()};return i.prototype.init=function(){var e=t.trim(this.$elm.attr("placeholder"));this.timer=this.$elm.attr("data-timer"),this.timer&&(this.timer=JSON.stringify(this.timer)),this.$placeholder=t("<div/>").addClass("placeholder").text(e).insertAfter(this.$elm).hide(),this.$elm.parent().css("position","relative"),this.setPosition(),this.eventBind()},i.prototype.eventBind=function(){var e=this;this.timer&&setInterval(function(){e.setPosition()},this.timer.delay),this.$elm.on("focus."+this.type,function(){e.$placeholder.hide()}).on("blur."+this.type,function(){var i=t.trim(e.$elm.val());0===i.length||i===e.text?(e.$elm.val(""),e.$placeholder.show()):e.$placeholder.hide()}),this.$placeholder.on("focus."+this.type,function(){e.$elm.focus()})},i.prototype.display=function(){var e=t.trim(this.$elm.val());0===e.length||e===t.trim(this.$elm.attr("placeholder"))?this.$placeholder.show():this.$placeholder.hide()},i.prototype.setPosition=function(){var t=this;setTimeout(function(){var e={left:t.$elm[0].offsetLeft,top:t.$elm[0].offsetTop,height:t.$elm.outerHeight(),width:t.$elm.outerWidth(),position:"absolute",paddingLeft:"10px",paddingRight:"10px",paddingTop:0,margin:0,lineHeight:t.$elm.outerHeight()+"px",cursor:"text",color:"#999"};"textarea"===t.$elm[0].nodeName.toLowerCase()&&(e.lineHeight="auto",e.paddingTop=5),t.$placeholder.css(e),t.display()},50)},function(i){"placeholder"in document.createElement("input")||(i=i||t("input,textarea"),e(i))}}),define("kotenei/popTips",["jquery"],function(t){var e=function(){function e(){function e(e,n,h,r){o&&clearTimeout(o),t.isFunction(h)&&(r=h,h=3e3),r=r||t.noop,h=h||3e3,s&&s.stop().remove(),s=t(i(e,n)).appendTo(document.body).hide(),s.css({marginLeft:-(s.width()/2),marginTop:-(s.height()/2)}).fadeIn("fase",function(){o=setTimeout(function(){s.stop().remove(),r()},h)})}function i(t,e){var i=[];switch(t){case"success":i.push('<div class="k-pop-tips success"><span class="fa fa-check"></span>&nbsp;<span>'+e+"</span></div>");break;case"error":i.push('<div class="k-pop-tips error"><span class="fa fa-close"></span>&nbsp;<span>'+e+"</span></div>");break;case"warning":i.push('<div class="k-pop-tips warning"><span class="fa fa-exclamation"></span>&nbsp;<span>'+e+"</span></div>")}return i.join("")}var s,o;return{success:function(t,i,s){e("success",t,i,s)},error:function(t,i,s){e("error",t,i,s)},warning:function(t,i,s){e("warning",t,i,s)}}}var i;return{getInstance:function(){return i||(i=e()),i}}}();return e.getInstance()}),function(t){var e={addEventListener:function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i},removeEventListener:function(t,e){t.removeEventListener?t.removeEventListener(e,handler,!1):t.detachEvent?t.detachEvent("on"+e,handler):t["on"+e]=null},proxy:function(t,e){var i=function(){return t.apply(e||this,arguments)};return i}},i=function(){this._routes=[]};i.prototype.init=function(){var i=this;e.addEventListener(t,"hashchange",e.proxy(i.listener,this)),this.listener()},i.prototype.listener=function(){var t,e=location.hash.slice(1).split("?"),i=e[0];e[1]&&(t=this.getUrlParams(e[1]));var s,o=this.getRoute(i),n={};if(!o)return void location.replace("#/");s=this.getValues(i,o);for(var h=0;h<o.params.length;h++)n[o.params[h]]=s[h];t=$.extend({},n,t),o.handle(t)},i.prototype.getUrlParams=function(t){var e={};if(!t)return e;for(var i,s=t.split("&"),o=0;o<s.length;o++)i=s[o].split("="),e[i[0]]=i[1];return e},i.prototype.map=function(t,e,i){var s,o,n,h=[];if(o=t.replace(/\//g,"\\/"),"function"==typeof e&&(i=e,e=null),e)for(var r in e)s=new RegExp("\\{"+r+"\\}","g"),o=o.replace(s,"("+e[r].replace(/\^/,"").replace(/\$/,"")+")"),h.push(r);for(s=new RegExp("{([^}]+)}","g");null!=(n=s.exec(o));)h.push(n[1]),s.lastIndex;return o="^"+o.replace(/{[^}]+}/gi,"(.+)")+"$",this._routes.push({routeUrl:t,pattern:o,params:h,handle:i||function(){}}),this},i.prototype.getValues=function(t,e){var e,i=[];if(0===t.length)return i;if(e=e||this.getRoute(t),null!=e){var s=t.match(e.pattern);if(0!=s.length)for(var o=1;o<s.length;o++)i.push(s[o])}return i},i.prototype.getRoute=function(t){for(var e=0;e<this._routes.length;e++)if(new RegExp(this._routes[e].pattern).test(t))return this._routes[e];return null},"function"==typeof t.define&&define.amd?define("kotenei/router",[],function(){return i}):t.Router=i}(window),define("kotenei/slider",["jquery","kotenei/dragdrop"],function(t,e){var i=function(e,i){this.$element=e,this.options=t.extend({},{min:1,max:10,step:1,value:1,$bindElement:t([]),callback:{slide:t.noop}},i),this.template='<div class="k-slider"><div class="k-slider-selection"></div><div class="k-slider-handle"></div></div>',this.min=this.options.min,this.max=this.options.max,this.step=this.options.step,this.diff=this.max-this.min,this.init()};return i.prototype.init=function(){var i=this;this.$slider=t(this.template).appendTo(this.$element),this.$sliderSelection=this.$slider.find("div.k-slider-selection"),this.$sliderHandle=this.$slider.find("div.k-slider-handle"),this.handleWidth=this.$sliderHandle.width(),this.sliderWidth=this.$slider.outerWidth(),this.$bindElement=this.options.$bindElement,this.dragdrop=new e({$range:this.$slider,$layer:this.$slider.find(".k-slider-handle"),direction:"h",callback:{move:function(t){var e=i.getMoveValue(t);i.setValue(e),i.options.callback.slide(e)}}}),this.eventBind(),this.setValue(this.options.value)},i.prototype.eventBind=function(){if(this.allowElement()){var e=this.$bindElement[0].type,i=this;-1!==e.indexOf("select")?this.$bindElement.on("change",function(){var e=t(this),s=t.trim(i.getFilterValue(e.val()));i.setValue(s)}):this.$bindElement.on("keyup",function(e){var s=t(this),o=t.trim(i.getFilterValue(s.val()));13===e.keyCode&&i.setValue(o)})}},i.prototype.allowElement=function(){if(0===this.$bindElement.length)return!1;var t=this.$bindElement[0].type;return"text"!==t&&"textarea"!==t&&-1===t.indexOf("select")?!1:!0},i.prototype.getFilterValue=function(t){return t||(t=this.min),isNaN(t)&&(t=this.min),t<this.min&&(t=this.min),t>this.max&&(t=this.max),t},i.prototype.setValue=function(t){t>this.max&&(t=this.max),t<this.min&&(t=this.min);var e=(t-this.min)/this.diff*100;this.setPercent(e),this.setElementValue(t)},i.prototype.setElementValue=function(t){if(this.allowElement()){var e=this.$bindElement[0].type;-1!=e.indexOf("select")?this.$bindElement.find("option[value='"+t+"']").prop("selected",!0):this.$bindElement.val(t)}},i.prototype.getMoveValue=function(t){var e=t.x/(this.sliderWidth-this.handleWidth)*100,i=Math.round(e/100*this.diff/this.step)*this.step+this.min;return i=i>this.max?this.max:i},i.prototype.setPercent=function(t){this.$sliderSelection.width(t+"%"),this.$sliderHandle.css("left",t+"%")},i}),define("kotenei/switch",["jquery"],function(t){var e=function(e,i){this.$element=e,this.options=t.extend({},{values:{on:{text:"on",value:"1",className:""},off:{text:"off",value:"0",className:""}},callback:{onclick:t.noop}},i),this.template='<div class="k-switch"></div>',this.init()};return e.prototype.init=function(){"checkbox"===this.$element[0].type&&(this.$switch=t(this.template).append(this.build()).insertAfter(this.$element),this.$switchScroller=this.$switch.find(".k-switch-scroller"),this.$element.hide(),this.checked="checked"===this.$element.attr("checked"),this.disabled="disabled"===this.$element.attr("disabled"),this.moveLeft=this.$switch.find(".k-switch-left").width(),this.checked?this.on():this.off(),this.disabled&&this.$switch.addClass("disabled"),this.$switch.on("click",t.proxy(this.toggle,this)))},e.prototype.build=function(){var t=[],e=this.options.values;return t.push('<div class="k-switch-scroller">'),t.push('<span class="k-switch-left" >'+e.on.text+"</span>"),t.push('<span class="k-switch-middle"></span>'),t.push('<span class="k-switch-right">'+e.off.text+"</span>"),t.push("</div>"),t.join("")},e.prototype.toggle=function(){this.disabled||(this.checked?(this.checked=!1,this.off()):(this.checked=!0,this.on()),this.options.callback.onclick(this.get()))},e.prototype.on=function(){this.disabled||(this.$element.prop("checked",!0),this.$switchScroller.stop().animate({left:0},300))},e.prototype.off=function(){this.disabled||(this.$element.prop("checked",!1),this.$switchScroller.stop().animate({left:-this.moveLeft},300))},e.prototype.get=function(){var t=this.options.values;return this.checked?t.on.value:t.off.value},e.prototype.destroy=function(){this.$switch.off("click"),this.$element.show(),this.$switch.remove()},e}),define("kotenei/tooltips",["jquery"],function(t){function e(e,i){this.$element=e,this.options=t.extend({},{delay:0,content:"",tipClass:"",placement:"right",trigger:"hover click",container:t(document.body),scrollContainer:null},i),this.tpl='<div class="k-tooltips"><div class="k-tooltips-arrow"></div><div class="k-tooltips-title"></div><div class="k-tooltips-inner"></div></div>',this.init()}return e.prototype.init=function(){var e=this;this.$tips=t(this.tpl),this.$tips.addClass(this.options.placement).addClass(this.options.tipClass),this.$container=t(this.options.container),this.setContent(),this.isShow=!1;for(var i,s=this.options.trigger.split(" "),o=0;o<s.length;o++)if(i=s[o],"click"===i)this.$element.on(i+".tooltips",t.proxy(this.toggle,this));else if("manual"!=i){var n="hover"===i?"mouseenter":"focus",h="hover"===i?"mouseleave":"blur";this.$element.on(n,t.proxy(this.show,this)),this.$element.on(h,t.proxy(this.hide,this))}"BODY"!==this.$container[0].nodeName&&this.$container.css("position","relative"),this.$container.append(this.$tips),this.options.scrollContainer&&t(this.options.scrollContainer).on("scroll.tooltips",function(){console.log("")}),t(window).on("resize.tooltips",function(){e.setPosition()}),this.hide()},e.prototype.setContent=function(e){e=t.trim(e||this.options.content),0===e.length&&(e=this.$element.attr("data-content")||"");var i=this.$tips;i.find(".k-tooltips-inner").html(e)},e.prototype.setPosition=function(){var t=this.getPosition();this.$tips.css(t)},e.prototype.getPosition=function(){var t=this.options.placement,e=(this.options.container,this.$element),i=(e.parent(),this.$tips),s=e.outerWidth(),o=e.outerHeight(),n=i.outerWidth(),h=i.outerHeight(),r={left:0,top:0},a=e[0];do r.left+=a.offsetLeft-a.scrollLeft,r.top+=a.offsetTop-a.scrollTop;while((a=a.offsetParent)&&a!=this.$container[0]);switch(t){case"left":return{top:r.top+o/2-h/2,left:r.left-n};case"top":return{top:r.top-h,left:r.left+s/2-n/2};case"right":return{top:r.top+o/2-h/2,left:r.left+s};case"bottom":return{top:r.top+o,left:r.left+s/2-n/2}}},e.prototype.show=function(){return 0===t.trim(this.options.content).length?void this.hide():(this.isShow=!0,this.setPosition(),this.$tips.show().addClass("in"),void this.setPosition())},e.prototype.hide=function(){this.isShow=!1,this.$tips.hide().removeClass("in")},e.prototype.toggle=function(){this.isShow?this.hide():this.show()},e.Global=function(i){var i=i||t('[data-module="tooltips"]');i.each(function(){var i=t(this),s=e.Get(i);s||(s=new e(i,{title:i.attr("data-title"),content:i.attr("data-content"),placement:i.attr("data-placement"),tipClass:i.attr("data-tipClass"),trigger:i.attr("data-trigger")}),e.Set(i,s))})},e.Get=function(t){return t.data("tooltips")},e.Set=function(t,e){t.data("tooltips",e)},e}),define("kotenei/tree",["jquery","kotenei/dragdrop"],function(t){var e={data:[],edit:{enable:!1},check:{enable:!1,chkType:"checkbox",chkBoxType:{Y:"ps",N:"ps"}},callback:{beforeCheck:t.noop,beforeSelect:t.noop,beforeAdd:t.noop,beforeRemove:t.noop,onCheck:t.noop,onSelect:t.noop,onAdd:t.noop,onRemove:t.noop}},i={className:{ICON:"icon",SWITCH:"switch"},floder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom"},node:{SELECTED:"selected"}},s={isArray:function(t){return t instanceof Array},getIndex:function(t,e){for(var i=0;i<e.length;i++)if(t.nodeId===e[i].nodeId)return i;return-1}},o=!1,n={getLineHtml:function(t){var e=i.line.CENTER;return t.isFirst&&0===t.parentId?e=i.line.ROOTS:t.isLast&&(e=i.line.BOTTOM),e+=t.hasChildren?t.open?"_"+i.floder.OPEN:"_"+i.floder.CLOSE:"_"+i.floder.DOCU,'<span id="switch_'+t.nodeId+'" nId="'+t.nodeId+'" class="'+i.className.ICON+" "+i.className.SWITCH+" "+e+'"></span>'},getIconHtml:function(t){return html='<span id="'+i.className.ICON+"_"+t.nodeId+'" class="'+i.className.ICON+" ico_"+i.floder.DOCU+'"></span>',t.hasChildren&&(html=t.open?'<span id="'+i.className.ICON+"_"+t.nodeId+'"  class="'+i.className.ICON+" ico_"+i.floder.OPEN+'"></span>':'<span id="'+i.className.ICON+"_"+t.nodeId+'"  class="'+i.className.ICON+" ico_"+i.floder.CLOSE+'"></span>'),html},getChkHtml:function(t,e){if(!e.check.enable||t.noCheck)return"";var s,n=String(t.checked===!0);return"radio"===e.check.chkType&&(o?n=!1:o=!0),s=e.check.chkType+"_"+n+"_"+(t.chkDisabled?"part":"full"),'<span id="chk_'+t.nodeId+'" nId="'+t.nodeId+'" class="'+i.className.ICON+" chk "+s+'"></span>'},replaceSwitchClass:function(t,e){var s=t.attr("class");if(s){var o=s.split("_");switch(e){case i.line.ROOT:case i.line.ROOTS:case i.line.CENTER:case i.line.BOTTOM:o[0]=i.className.ICON+" "+i.className.SWITCH+" "+e;break;case i.floder.OPEN:case i.floder.CLOSE:case i.floder.DOCU:o[1]=e}t.attr("class",o.join("_"))}},replaceChkClass:function(t,e){t.attr("class",t.attr("class").replace(e?"false":"true",e?"true":"false"))}},h=function(i,s){this.$element=i,this.options=t.extend(!0,e,s),this.nodes={},this.prefix="node",this.init()};return h.prototype.init=function(){this.initNodes(this.options.data),this.createTree(),this.eventBind()},h.prototype.initNodes=function(t){if(s.isArray(t)&&0!==t.length)for(var e,i=0;i<t.length;i++)e=t[i],0===i&&i+1<t.length?e.isFirst=!0:i+1===t.length&&(e.isLast=!0),e.hasChildren=this.hasChildren(e),e.isParent=e.hasChildren,this.nodes[this.prefix+e.nodeId]=e,this.initNodes(e.nodes)},h.prototype.eventBind=function(){var e=this;this.$element.on("click","."+i.className.SWITCH,function(){var s=t(this),o=s.attr("nId"),h=e.$tree.find("#ul_"+o),r=e.$tree.find("#icon_"+o);0!==h.length&&h.slideToggle("fast",function(){n.replaceSwitchClass(s,"none"===h[0].style.display?i.floder.CLOSE:i.floder.OPEN),n.replaceSwitchClass(r,"none"===h[0].style.display?i.floder.CLOSE:i.floder.OPEN)})}).on("click",".chk",function(){var i=t(this),s=i.attr("nId"),o=e.getNode(s),h=this.className,r=e.getCheckedNodes(),a=-1===h.indexOf("true");if(e.options.callback.beforeCheck()!==!1&&!o.chkDisabled){if(o.checked=a,n.replaceChkClass(i,o.checked),"checkbox"===e.options.check.chkType)e.check(o);else for(var l=0;l<r.length;l++)r[l]!=o&&(r[l].checked=!1,n.replaceChkClass(e.$tree.find("#chk_"+r[l].nodeId),!1));e.options.callback.onCheck(o)}}).on("click","a",function(){var s=t(this);e.options.callback.beforeSelect()!==!1&&(s.hasClass(i.node.SELECTED)||(e.$element.find("a").removeClass(i.node.SELECTED),s.addClass(i.node.SELECTED),e.options.callback.onSelect(e.getSelectedNode())))}).on("click",".add",function(){t(this)}).on("click",".edit",function(){t(this)}).on("click",".remove",function(){t(this)})},h.prototype.createTree=function(){var e=[];e.push('<ul class="k-tree">'),this.createNode(this.options.data,e),e.push("</ul>"),this.$tree=t(e.join("")),this.$element.append(this.$tree)},h.prototype.createNode=function(t,e,i){var o,h="line";if(s.isArray(t)&&0!==t.length&&s.isArray(e)){i&&(i.isLast&&(h=""),e.push(i.open?'<ul id="ul_'+i.nodeId+'" class="'+h+'">':'<ul id="ul_'+i.nodeId+'" style="display:none;" class="'+h+'" >'));for(var o,r=0;r<t.length;r++)o=this.getNode(t[r].nodeId),o&&(e.push('<li id="li_'+o.nodeId+'" nId="'+o.nodeId+'">'),e.push(n.getLineHtml(o)),e.push(n.getChkHtml(o,this.options)),e.push('<a href="javascript:void(0);" id="a_'+o.nodeId+'" nId="'+o.nodeId+'">'),e.push(n.getIconHtml(o)),e.push("<span>"+o.text+"</span>"),e.push("</a>"),this.createNode(o.nodes,e,o),e.push("</li>"));i&&e.push("</ul>")}},h.prototype.addNodes=function(e,o){var e,h=[];if(s.isArray(o)||(o=[o]),e=e||this.getNode(o[0].parentId),this.initNodes(o),this.createNode(o,h),e){var r=this.$tree.find("#li_"+e.nodeId),a=r.find("#ul_"+e.nodeId);if(0===a.length){e.nodes=o;var l=r.find("#"+i.className.SWITCH+"_"+e.nodeId),d=r.find("#"+i.className.ICON+"_"+e.nodeId);a=t('<ul class="'+(e.isLast?"":"line")+'" />').attr("id","ul_"+e.nodeId),n.replaceSwitchClass(l,i.floder.OPEN),n.replaceSwitchClass(d,i.floder.OPEN)}else{var c=e.nodes[e.nodes.length-1],p=r.find("#li_"+c.nodeId);p.children("ul").addClass("line");var l=p.find("#"+i.className.SWITCH+"_"+c.nodeId);c.isLast=!1,n.replaceSwitchClass(l,i.line.CENTER),Array.prototype.push.apply(e.nodes,o)}a.append(h.join("")).appendTo(r)}else{var p=this.$tree.children("li").last(),u=p.find("#ul_"+p.attr("nid"));u.addClass("line"),this.$tree.append(h.join(""))}},h.prototype.removeNode=function(t){if(t){for(var e=this.getNode(t.parentId),o=this.getChildNodes(t),h=this.$tree.find("#li_"+t.parentId),r=this.$tree.find("#li_"+t.nodeId),a=r.prev(),l=r.next(),d=this.getNode(a.attr("nId")),c=this.getNode(l.attr("nId")),p=0;p<o.length;p++)this.$tree.find("#li_"+o[p].nodeId).remove(),delete this.nodes[this.prefix+o[p].nodeId];if(e){var u=s.getIndex(t,e.nodes);u>=0&&e.nodes.splice(u,1),0===e.nodes.length&&(r.parent().remove(),e.isParent=!1,e.open=!1,n.replaceSwitchClass(h.find("#"+i.className.SWITCH+"_"+e.nodeId),i.floder.DOCU),n.replaceSwitchClass(h.find("#"+i.className.ICON+"_"+e.nodeId),i.floder.DOCU))}d&&t.isLast&&(d.isLast=!0,a.children("ul").removeClass("line"),d.isFirst&&0===d.parentId?n.replaceSwitchClass(a.find("#"+i.className.SWITCH+"_"+d.nodeId),i.line.ROOT):n.replaceSwitchClass(a.find("#"+i.className.SWITCH+"_"+d.nodeId),i.line.BOTTOM)),t.isFirst&&0===t.parentId&&c&&(c.isFirst=!0,n.replaceSwitchClass(l.find("#"+i.className.SWITCH+"_"+c.nodeId),i.line.ROOT)),r.remove(),delete this.nodes[this.prefix+t.nodeId]}},h.prototype.check=function(t){function e(t,e){for(var i=!0;t&&s.isArray(t.nodes);){for(var o,n=0;n<t.nodes.length;n++)if(o=t.nodes[n],o.checked){i=!1;break}if(!i)return;this.checkAction([t],e),i=!0,t=this.getNode(t.parentId)}}var i=this.getParentNodes(t),o=this.getChildNodes(t),n=this.getNode(t.parentId),h=this.options;if(t.checked)switch(h.check.chkBoxType.Y.toLowerCase()){case"p":this.checkAction(i,t.checked);break;case"s":this.checkAction(o,t.checked);break;default:this.checkAction(i,t.checked),this.checkAction(o,t.checked)}else switch(h.check.chkBoxType.N.toLowerCase()){case"p":e.call(this,n,t.checked);break;case"s":this.checkAction(o,t.checked);break;default:e.call(this,n,t.checked),this.checkAction(o,t.checked)}},h.prototype.checkAction=function(t,e){for(var i,s,o=0;o<t.length;o++)i=t[o],i.checked=e,s=this.$tree.find("#chk_"+i.nodeId),i.chkDisabled||n.replaceChkClass(s,e)},h.prototype.getParentChildNodes=function(t){var e=this.getParentNodes(t);return this.getChildNodes(t,e),e},h.prototype.getParentNodes=function(t){for(var e=this.nodes[this.prefix+t.parentId],i=[];e;)i.push(e),e=this.nodes[this.prefix+e.parentId];return i},h.prototype.getChildNodes=function(t,e){if(e||(e=[]),!s.isArray(t.nodes))return e;for(var i=0;i<t.nodes.length;i++)e.push(t.nodes[i]),this.getChildNodes(t.nodes[i],e);return e},h.prototype.getSelectedNode=function(){var t=this.$tree.find("a.selected");if(0===t.length)return null;var e=t.attr("nId");return this.getNode(e)},h.prototype.getCheckedNodes=function(){var t=[];for(var e in this.nodes)this.nodes[e].checked&&t.push(this.nodes[e]);return t},h.prototype.getNode=function(t){return this.nodes[this.prefix+t]},h.prototype.hasChildren=function(t){return t&&s.isArray(t.nodes)&&t.nodes.length>0?!0:!1},h}),define("kotenei/util",function(){var t={},e=function(){};return t.createProto=Object.__proto__?function(t){return{__proto__:t}}:function(t){return e.prototype=t,new e},t}),define("kotenei/validate",["jquery"],function(t){function e(i,s){this.$form=i,this.options=t.extend({},e.DEFAULTS,s),this.rules=this.options.rules,this.messages=this.options.messages,this.init()}return e.DEFAULTS={errorClass:"error",errorElement:"label",rules:{},messages:{},focusClear:!0,keyupClear:!0,errorPlacement:null},e.prototype.init=function(){this.getValidFields(),0!==this.validFields.count&&this.eventBind()},e.prototype.getValidFields=function(){this.validFields={data:{},count:0};{var e=this;this.$form.find("input,select,textarea").filter(function(){return this.name in e.rules?!0:!1}).each(function(){e.validFields.data[this.name]||(e.validFields.data[this.name]=t(this),e.validFields.count++)})}},e.prototype.eventBind=function(){var t=this;this.$form.on("submit",function(e){return t.validateFrom(e)}).on("focus blur keyup",':text, [type="password"], [type="file"], select, textarea, [type="number"], [type="search"] ,[type="tel"], [type="url"], [type="email"], [type="datetime"], [type="date"], [type="month"], [type="week"], [type="time"], [type="datetime-local"], [type="range"], [type="color"]',function(e){t.validate(e)}).on("click",'[type="radio"], [type="checkbox"], select, option',function(e){t.validate(e)})},e.prototype.validate=function(e){var i,s,o=e.target,n=t(o),h=this.rules[o.name];if(this.options.focusClear&&"focusin"===e.type||this.options.keyupClear&&"keyup"===e.type)return void this.hideError(n);if(h){s=this.elementValue(n);for(var r in h){var a={method:r,parameters:h[r]};if(i=this.methods[r].call(this,s,n,a.parameters),!i)return this.formatAndAdd(o,a),!1;this.hideError(n)}return!0}},e.prototype.validateFrom=function(){var t=this,e=!0;for(var i in this.validFields.data)t.validate({target:this.validFields.data[i][0]})||(e=!1);return e},e.prototype.valid=function(){return this.validateFrom()},e.prototype.checkable=function(t){return/radio|checkbox/i.test(t.type)},e.prototype.formatAndAdd=function(e,i){var s=t(e),o=this.defaultMessage(e,i.method);o=this.format(o,i.parameters),this.showError(s,o)},e.prototype.showError=function(e,i){this.checkable(e[0])&&(e=this.validFields.data[e[0].name]);var s=e.data("error");s||(s=t("<"+this.options.errorElement+">").addClass(this.options.errorClass),e.data("error",s)),s.html(i).show(),e.addClass(this.options.errorClass),t.isFunction(this.options.errorPlacement)?this.options.errorPlacement(e,s):s.insertAfter(e)},e.prototype.hideError=function(e){this.checkable(e[0])&&(e=this.validFields.data[e[0].name]);var i=e.data("error");e.removeClass(this.options.errorClass),t.isFunction(this.options.errorPlacement)&&this.options.errorPlacement(e,t([])),i&&i.hide()},e.prototype.defaultMessage=function(t,e){return this.messages[t.name]||(this.messages[t.name]={},this.messages[t.name][e]=this.errorMessages[e]),this.messages[t.name][e]||(this.messages[t.name][e]=this.errorMessages[e]),this.messages[t.name][e]},e.prototype.format=function(e,i){return-1!=e.indexOf("{0}")&&(i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})})),e},e.prototype.addMethod=function(t,e,i){this.methods[t]=e,this.errorMessages[t]=void 0!==i?i:this.errorMessages[t]},e.prototype.errorMessages={required:"该字段不能为空",email:"电子邮箱格式错误",url:"url格式错误",date:"请输入一个有效日期",dateISO:"请输入一个有效日期（ISO）",mobile:"手机号码格式错误",phone:"电话号码格式错误",number:"请输入一个有效的数字",digits:"请输入正整数",minLength:"请输入一个长度不小于{0}个字符的值",maxLength:"请输入一个长度不大于{0}个字符的值",rangeLength:"请输入一个长度介于{0}到{1}个字符的值",min:"请输入一个大于或等于{0}的值",max:"请输入一个小于或等于{0}的值",range:"请输入一个介于{0}到{1}之间的数值",equalTo:"请再输入一个相同的值",remote:"远程验证失败"},e.prototype.methods={required:function(e,i){if("select"===i[0].nodeName.toLowerCase()){var s=t.trim(i.val());return s&&s.length>0}return this.checkable(i[0])?this.getLength(e,i[0])>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^(?:[a-z0-9]+[_\-+.]+)*[a-z0-9]+@(?:([a-z0-9]+-?)*[a-z0-9]+.)+([a-z]{2,})+$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}|\d{4}[\/-]\d{1,2}[\/-]\d{1,2}\s\d{1,2}[:]\d{1,2}[:]\d{1,2}\w$/.test(t)},mobile:function(t,e){return this.optional(e)||/^((13[0-9])|(15[^4,\\D])|(18[0|1|2|5-9])|(17[0|7]))\d{8}$/.test(t)},phone:function(t,e){return this.optional(e)||/^((0\d{2,3}\-)[1-9]\d{7}(\-\d{1,4})?)$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minLength:function(e,i,s){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),i[0]);return this.optional(i)||o>=s},maxLength:function(e,i,s){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),i[0]);
return this.optional(i)||s>=o},rangeLength:function(e,i,s){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),i[0]);return this.optional(i)||o>=s[0]&&o<=s[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(e,i,s){var i=t(s);return e===this.elementValue(i)},remote:function(e,i,s){var o,n={},h=this,r=this.previousValue(i[0]);return r.old===e?r.valid:(r.old=e,"string"==typeof s?o=s:(o=s.url,n=s.data),n[i[0].name]=e,n.rnd=Math.random(),t.post(o,n).success(function(t){var e=t===!0||"true"===t;e?h.hideError(i):h.showError(i,r.message),r.valid=e}).error(function(){return!1}),!0)}},e.prototype.previousValue=function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})},e.prototype.optional=function(t){var e=this.elementValue(t);return!this.methods.required.call(this,e,t)},e.prototype.elementValue=function(e){var i=e.attr("type"),s=e.val();return"radio"===i||"checkbox"===i?t("input[name='"+e.attr("name")+"']:checked").val():"string"==typeof s?s.replace(/\r/g,""):s},e.prototype.getLength=function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.$form.find("[name='"+i.name+"']").filter(":checked").length}return e.length},e.prototype.getData=function(){var e={},i=this;return i.$form.find("input[name], textarea[name]").each(function(){var i=t(this);if(i.is("[type=checkbox]")===!1&&i.is("[type=radio]")===!1)e[i.attr("name")]=t.trim(i.val());else if(i.is("[type=radio]:checked"))e[i.attr("name")]=t.trim(i.val());else if(i.is("[type=checkbox]:checked")){var s=i.attr("name");e[s]||(e[s]=[]),e[s].push(i.val())}}),e},e}),define("kotenei/validateTooltips",["jquery","kotenei/validate","kotenei/tooltips","kotenei/util"],function(t,e,i,s){var o=function(t,i){e.call(this,t,i)};return o.prototype=s.createProto(e.prototype),o.prototype.getTipsPlacement=function(t){var e=t.name,i="right";return this.tipsPlacement||(this.tipsPlacement=this.options.tipsPlacement||{}),this.tipsPlacement[e]?i=this.tipsPlacement[e]:this.tipsPlacement[e]=i,i},o.prototype.showError=function(t,e){this.checkable(t[0])&&(t=this.validFields.data[t[0].name]);var s=this.getTipsPlacement(t[0]),o=i.Get(t);o?o.setContent(e):(o=new i(t,{content:e,tipClass:"danger",trigger:"manual",placement:s,container:this.options.container||document.body,scrollContainer:this.options.scrollContainer}),i.Set(t,o)),o.show(),t.addClass(this.options.errorClass)},o.prototype.hideError=function(t){this.checkable(t[0])&&(t=this.validFields.data[t[0].name]);var e=i.Get(t);e&&e.hide(),t.removeClass(this.options.errorClass)},o}),define("kotenei/waterfall",["jquery","kotenei/infiniteScroll","kotenei/popTips"],function(t,e,i){var s=function(e,i){this.$element=e,this.options=t.extend({},{width:200,margin:10,nodeTag:"li",resize:!1,url:null,loaded:t.noop},i),this.$window=t(window),this.$document=t(document),this.node_w=this.options.width+this.options.margin,this.loading=!1,this.noMore=!1,this.init()};return s.prototype.init=function(){var i=this;this.arrangementInit(),this.infiniteScroll=new e({$watchElement:this.$element,scrollDistance:0,callback:function(){return i.options.url?void i.remote():void(i.options.data&&i.options.data.length>0&&i.options.loaded.call(i,i.$element,i.options.data))}}),this.options.resize&&(this.$element.css("position","static"),this.$window.on("resize.waterfall",t.proxy(this.arrangementInit,this)))},s.prototype.arrangementInit=function(){this.arrHeight=[],this.nodes=this.$element.children(this.options.nodeTag);for(var t,e,i=this.options.resize?this.$document.width()/this.node_w|0:this.$element.width()/this.node_w|0,s=0;s<this.nodes.length;s++)e=this.nodes.eq(s),t=e.outerHeight(),i>s?(this.arrHeight[s]=t,e.css({top:0,left:s*this.node_w})):this.set(e,t);this.adpHeight()},s.prototype.arrangement=function(e){var i=this;return 0===this.arrHeight.length?void this.arrangementInit():void(e&&0!==e.length&&(e.each(function(){var e=t(this),s=e.outerHeight();i.set(e,s)}),this.adpHeight()))},s.prototype.set=function(t,e){var i=this.getMinHeight(),s=this.getMinHeightIndex(i);s=-1==s?0:s,this.arrHeight[s]+=e+this.options.margin,t.css({top:i+this.options.margin,left:s*this.node_w})},s.prototype.getMinHeightIndex=function(t){if(Array.indexOf){var e=this.arrHeight.indexOf(t);return e}for(var i=0;i<this.arrHeight;i++)if(this.arrHeight[i]===t)return i},s.prototype.remote=function(){if(!this.noMore&&!this.loading){var e=this;this.loading=!0,t.get(this.options.url,{rnd:Math.random()}).done(function(t){return t&&0!==t.length?(e.options.loaded.call(e,e.$element,t),void(e.loading=!1)):(e.noMore=!0,!1)}).fail(function(){i.error("网络错误！"),e.loading=!1})}},s.prototype.destory=function(){this.infiniteScroll.destory()},s.prototype.imgLoad=function(t,e,i){var s=new Image,o=this;s.onload=function(){t.attr("src",e),i(o.zoom(s.width,s.height))},s.onerror=function(){i({width:o.options.width,height:300})},s.src=e},s.prototype.zoom=function(t,e){var i;return t>e||t==e?(i=t/e,e=this.options.width/i):(i=e/t,e=this.options.width*i),{width:this.options.width,height:e}},s.prototype.getMinHeight=function(){return Math.min.apply(null,this.arrHeight)},s.prototype.getMaxHeight=function(){return Math.max.apply(null,this.arrHeight)},s.prototype.adpHeight=function(){this.$element.height(this.getMaxHeight())},s}),define("kotenei/window",["jquery","kotenei/dragdrop","kotenei/popTips"],function(t){var e=function(e){this.options=t.extend({},{url:null,params:null,title:"弹出框",content:null,width:"600",height:null,backdrop:!0,backdropClose:!1},e),this._event={open:t.noop,ok:t.noop,close:t.noop},this.loading=!1,this.template='<div class="k-window"><h4 class="k-window-header"><span class="k-window-title"></span><span class="k-window-close">×</span></h4><div class="k-window-container"></div><div class="k-window-footer"><button type="button" class="btn btn-primary k-window-ok">确定</button><button type="button" class="btn btn-default k-window-cancel">取消</button></div></div>',this.backdrop='<div class="k-window-backdrop"></div>',this.$document=t(document),this.$window=t(window),this.init()};e.prototype.init=function(){this.build(),this.setTitle(this.options.title),null!==this.options.content&&this.setContent(this.options.content),this.eventBind()},e.prototype.eventBind=function(){var t=this;this.$window.on("resize.window",function(){t.layout()}),this.$backdrop.on("click",function(){t.options.backdropClose&&t.close()}),this.$win.on("click",".k-window-cancel,.k-window-close",function(){t.close()}).on("click",".k-window-ok",function(){t._event.ok.call(t)!==!1&&t.hide()})},e.prototype.on=function(e,i){this._event.hasOwnProperty(e)&&(this._event[e]=i||t.noop)},e.prototype.setTitle=function(t){this.$header.find(".k-window-title").text(t)},e.prototype.setContent=function(t){t=t||this.options.content,this.$container.html(t)},e.prototype.remote=function(){if("string"==typeof this.options.url&&null==this.options.content){var e=this,i=t.Deferred();return this.loading=!0,this.$container.load(this.options.url+"?rnd="+Math.random(),this.options.params,function(){e.loading=!1,i.resolve()}),i.promise()}},e.prototype.open=function(){var e=this;t.when(this.remote()).done(function(){e.$win.show(),e.options.backdrop&&e.$backdrop.show(),e.layout(),e._event.open(e.$win);var t=i.get();e.$win.css("zIndex",t),e.$backdrop.css("zIndex",--t)})},e.prototype.close=function(t){return t?void this.hide():void(this._event.close()!==!1&&this.hide())},e.prototype.hide=function(){this.$win.hide(),this.$backdrop.hide(),i.pop()},e.prototype.layout=function(){var t,e,i=this.$window.height(),s=i-100,o=this.$header.height(),n=this.$footer.height(),h=s-o-n;this.options.height?s<this.options.height?(t=s,e=h):(t=this.options.height,e=t-o-n):(this.orgHeight=this.orgHeight||this.$win.height(),s<this.orgHeight?(t=s,e=h):(t=this.orgHeight,e=this.orgHeight-o-n)),this.$container.css("height",e),this.$win.css({height:t,marginLeft:-this.$win.width()/2,marginTop:-t/2})},e.prototype.build=function(){this.$win=t(this.template).css({width:this.options.width,height:this.options.height}),this.$backdrop=t(this.backdrop),this.$header=this.$win.find(".k-window-header"),this.$container=this.$win.find(".k-window-container"),this.$footer=this.$win.find(".k-window-footer"),this.$win.appendTo(document.body),this.$backdrop.appendTo(document.body)},e.alert=function(i,s,o){t.isFunction(s)&&(o=s,s=i,i="提示");var n=new e({width:400,backdropClose:!1});n.$win.find(".k-window-cancel").hide(),n.setTitle(i),n.setContent(s),n.on("ok",o||t.noop),n.open()},e.confirm=function(i,s,o,n){t.isFunction(s)&&(n=o,o=s,s=i,i="确认提示");var h=new e({width:400,backdropClose:!1});h.setTitle(i),h.setContent(s),h.on("ok",o||t.noop),h.on("close",n||t.noop),h.open()};var i=function(){var t=[];return{get:function(){var e;return 0===t.length?(e=1e3,t.push(e)):(e=t[t.length-1],e+=2,t.push(e)),e},pop:function(){0!==t.length&&t.pop()}}}();return e}),define("kotenei/wordLimit",["jquery"],function(t){var e=function(e,i){this.$element=e,this.options=t.extend({},{maxLength:140,feedback:".chars"},i),this.init()};return e.prototype.init=function(){var e=this;this.maxLength=parseInt(this.$element.attr("maxLength")||this.options.maxLength),this.$feedback=t(this.options.feedback),this.$element.on("keyup",function(){var i=t.trim(t(this).val());e.update(i)}),this.update(t.trim(this.$element.val()))},e.prototype.update=function(t){var e=t.length,i=this.maxLength,s=i-e;e>=i&&this.$element.val(t.substring(0,i)),this.$feedback.html(0>s?0:s)},e.Global=function(i){i=i||t("input,textarea").filter('[data-module="wordlimit"]'),i.each(function(){var i=t(this),s=i.attr("maxLength"),o=e.Get(i);s&&(o||(o=new e(i,{maxLength:s,feedback:i.attr("data-feedback")}),e.Set(i,o)))})},e.Get=function(t){return t.data("wordLimit")},e.Set=function(t,e){t.data("wordLimit",e)},e}),define("kotenei",["kotenei/autoComplete","kotenei/cache","kotenei/clipZoom","kotenei/datepicker","kotenei/dragdrop","kotenei/dropdown","kotenei/dropdownDatepicker","kotenei/highlight","kotenei/infiniteScroll","kotenei/lazyload","kotenei/loading","kotenei/pager","kotenei/placeholder","kotenei/popTips","kotenei/router","kotenei/slider","kotenei/switch","kotenei/tooltips","kotenei/tree","kotenei/util","kotenei/validate","kotenei/validateTooltips","kotenei/waterfall","kotenei/window","kotenei/wordLimit"],function(t,e,i,s,o,n,h,r,a,l,d,c,p,u,f,g,m,v,y,$,w,k,x,b,C){return{AutoComplete:t,cache:e,ClipZoom:i,Datepicker:s,Dragdrop:o,Dropdown:n,DropdownDatepicker:h,highlight:r,InfiniteScroll:a,lazyload:l,Loading:d,Pager:c,placeholder:p,popTips:u,Router:f,Slider:g,Switch:m,Tooltips:v,Tree:y,Util:$,Validate:w,ValidateTooltips:k,Waterfall:x,Window:b,WordLimit:C}});