<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>模态窗体</title>
    <link href="../style/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../dist/css/km.min.css" rel="stylesheet" />
    <link href="docs.min.css" rel="stylesheet" />
    <link href="demo.css" rel="stylesheet" />
</head>
<body>
    <div class="header">
        <div class="wrap">
            <ul class="nav-list">
                <li><a href="index.html">首页</a></li>
                <li><a href="###" class="active">demo</a></li>
            </ul>
        </div>
    </div>
    <div class="main wrap">
        <ul class="demo-nav-list" id="navList">
        </ul>
        <script type="text/javascript" src="nav.js"></script>
        <script type="text/javascript">
            nav(document.getElementById('navList'), 'window');
        </script>
        <div class="demo-container">
            <h1 class="page-header">模态窗体</h1>
            <h3>提示对话框</h3>
            <div class="bs-example bs-example-padded-bottom">
                <button role="alert" class="btn btn-primary btn-lg" type="button">
                    Launch demo modal
                </button>
            </div>
            <h3>调用</h3>
            <div class="highlight">
                <pre>
                    <code data-lang="js" class="language-js">
KM.Window.alert('提示框', '警告提示', function () {
    alert('回调');
});
                    </code>
                </pre>
            </div>
            <h3>参数</h3>
            <table class="table table-bordered table-striped js-options-table">
                <thead>
                    <tr>
                        <th>名称</th>
                        <th>类型</th>
                        <th>默认值</th>
                        <th>描述</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>参数1</td>
                        <td>string</td>
                        <td style="width: 100px;">'提示'</td>
                        <td>对话框标题，可不填</td>
                    </tr>
                    <tr>
                        <td>参数2</td>
                        <td>string</td>
                        <td></td>
                        <td>对话框内容</td>
                    </tr>
                    <tr>
                        <td>参数3</td>
                        <td>function</td>
                        <td></td>
                        <td>对话框点击确认后的回调函数</td>
                    </tr>
                </tbody>
            </table>
            <hr />
            <br />
            <h3>确认对话框</h3>
            <div class="bs-example bs-example-padded-bottom">
                <button role="confirm" class="btn btn-primary btn-lg" type="button">
                    Launch demo modal
                </button>
            </div>
            <h3>调用</h3>
            <div class="highlight">
                <pre>
                    <code data-lang="js" class="language-js">
KM.Window.confirm('确认对话框xxx','您确认要XXXX吗？', function () {
    alert('确认');
}, function () {
    alert('取消');
});

                    </code>
                </pre>
            </div>
            <h3>参数</h3>
            <table class="table table-bordered table-striped js-options-table">
                <thead>
                    <tr>
                        <th>名称</th>
                        <th>类型</th>
                        <th>默认值</th>
                        <th>描述</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>参数1</td>
                        <td>string</td>
                        <td style="width: 100px;">'确认对话框'</td>
                        <td>对话框的标题，可不填</td>
                    </tr>
                    <tr>
                        <td>参数2</td>
                        <td>string</td>
                        <td></td>
                        <td>对话框的内容</td>
                    </tr>
                    <tr>
                        <td>参数3</td>
                        <td>function</td>
                        <td></td>
                        <td>对话框点击确认后的回调函数，加上<code>return false;</code>可以阻止窗体关闭。</td>
                    </tr>
                    <tr>
                        <td>参数4</td>
                        <td>function</td>
                        <td></td>
                        <td>对话框点击取消后的回调函数，加上<code>return false;</code>可以阻止窗体关闭</td>
                    </tr>
                </tbody>
            </table>
            <hr />
            <br />
            <h3>全局调用</h3>
            <div class="bs-example bs-example-padded-bottom">
                <button class="btn btn-primary btn-lg"
                    type="button"
                    data-module="window"
                    data-options="{
                        url:'http://www.baidu.com',
                        width:680,
                        height:480,
                        iframe:true,
                        title:'全局调用',
                        btns:btns
                    }"
                    data-onok="ok"
                    data-onclose="close"
                    data-onafterclose="afterClose">
                    Launch demo modal
                </button>
            </div>

            <pre>
                <code>
//$elms为带有data-module=window属性的元素，可不填（不填性能会低下）
KM.Window.Global($elms);
                </code>
            </pre>
            <h3>HTML参数设置</h3>
            <table class="table table-bordered table-striped js-options-table">
                <thead>
                    <tr>
                        <th>名称</th>
                        <th>设置值</th>
                        <th style="width: 60%;">描述</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>data-module</td>
                        <td>window</td>
                        <td>告诉程序当前html元素需要初始化为window模块
                        </td>
                    </tr>
                    <tr>
                        <td>data-options</td>
                        <td>"{url:'',width:680,height:480 ... }"
                        </td>
                        <td>初始化参数，参照下表options说明
                        </td>
                    </tr>
                    <tr>
                        <td>data-onok</td>
                        <td>函数的名称</td>
                        <td>点击确定的回调函数
                        </td>
                    </tr>
                    <tr>
                        <td>data-onclose</td>
                        <td>函数的名称</td>
                        <td>关闭窗口的回调函数
                        </td>
                    </tr>
                    <tr>
                        <td>data-onafterclose</td>
                        <td>函数的名称</td>
                        <td>窗口关闭之后的回调函数
                        </td>
                    </tr>
                </tbody>
            </table>
            <h3>示例代码</h3>
            <pre>
                <code>
//HTML参数设置
&lt;button class="btn btn-primary btn-lg"
        type="button"
        id="btnGlobal"
        data-module="window"
        data-options="{
            url:'http://www.baidu.com',
            width:680,
            height:480,
            iframe:true,
            title:'全局调用',
            btns:btns
        }"
        data-onok="ok"
        data-onclose="close"
        data-onafterclose="afterClose"&gt;
        Launch demo modal
&lt;/button&gt;

//设置自定义按钮
var btns: [
    {
        text: '测试',                        //按钮文本
        action: 'test',                 //按钮绑定事件的唯一标识
        className: 'k-btn-success',         //按钮的样式
        func: function () {                 //点击按钮的回调函数
            alert('测试');
            win.close();
        }
    },
]


//设置确定回调函数
function ok() {
    alert("ok");
}

//设置关闭回调函数
function close() {
    alert("close");
}

//全局调用
KM.Window.Global($('#btnGlobal'));
                </code>
            </pre>
            <hr />
            <br />
            <h3>自定义</h3>
            <div class="bs-example bs-example-padded-bottom">
                <button role="custom" class="btn btn-primary btn-lg" type="button">
                    Launch demo modal
                </button>
            </div>
            <h3>初始化</h3>
            <div class="highlight">
                <pre>
                    <code data-lang="js" class="language-js">
//创建win对象
var win=new KM.Window(options);
                    </code>
                </pre>
            </div>
            <h3>参数 options</h3>
            <table class="table table-bordered table-striped js-options-table">
                <thead>
                    <tr>
                        <th>名称</th>
                        <th>类型</th>
                        <th>默认值</th>
                        <th>描述</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>url</td>
                        <td>string</td>
                        <td style="width: 100px;">null</td>
                        <td>远程地址，如果参数<code>iframe</code>设置为true，则使用<code>iframe</code>模式，否则使用<code>ajax</code>取内容。</td>
                    </tr>
                    <tr>
                        <td>params</td>
                        <td>object</td>
                        <td>null</td>
                        <td>使用ajax取内容时，传递到服务器的参数</td>
                    </tr>
                    <tr>
                        <td>id</td>
                        <td>string</td>
                        <td>null</td>
                        <td>窗体的ID</td>
                    </tr>
                    <tr>
                        <td>title</td>
                        <td>string</td>
                        <td>'弹出框'</td>
                        <td>窗体的标题</td>
                    </tr>
                    <tr>
                        <td>content</td>
                        <td>string</td>
                        <td>null</td>
                        <td>窗体的内容</td>
                    </tr>
                    <tr>
                        <td>width</td>
                        <td>int</td>
                        <td>600</td>
                        <td>窗体的宽度</td>
                    </tr>
                    <tr>
                        <td>height</td>
                        <td>int</td>
                        <td>null</td>
                        <td>窗体的高度，默认为自适应当前浏览器窗口最大高度，当数值设置过大时，则转为自适应模式，窗体永远在浏览器的正中间。</td>
                    </tr>
                    <tr>
                        <td>backdrop</td>
                        <td>boolean</td>
                        <td>true</td>
                        <td>是否显示遮罩层，默认显示</td>
                    </tr>
                    <tr>
                        <td>backdropClose</td>
                        <td>boolean</td>
                        <td>false</td>
                        <td>点击遮罩层时，是否关闭窗体，默认为不隐藏</td>
                    </tr>
                    <tr>
                        <td>iframe</td>
                        <td>boolean</td>
                        <td>false</td>
                        <td>是否使用iframe模式，设置true的同时，把url也设置上</td>
                    </tr>
                    <tr>
                        <td>showFooter</td>
                        <td>boolean</td>
                        <td>true</td>
                        <td>是否显示窗体的底部区域（按钮区），默认为显示</td>
                    </tr>
                    <tr>
                        <td>btns</td>
                        <td>array</td>
                        <td>[]</td>
                        <td>自定义按钮
                            <p>
                                <code>注：如果 action 设置为 ok、close 或者 cancel 时，func 参数将不会起效。
                                </code>
                            </p>
                            <pre>
                                <code>
btns: [
    {
        text: '测试',                        //按钮文本
        action: 'test',                 //按钮绑定事件的唯一标识
        className: 'k-btn-success',         //按钮的样式
        func: function () {                 //点击按钮的回调函数
            alert('测试');
            win.close();
        }
    },
]
                                </code>
                            </pre>
                        </td>
                    </tr>
                </tbody>
            </table>
            <h3>绑定事件</h3>
            <div class="highlight">
                <pre>
                    <code data-lang="js" class="language-js">
win.on('ok', function () {
    //确定的回调函数
    alert("ok");
}).on('close',function(){
    //关闭的回调函数
    alert('close');
}).on('afterClose',function(){
    //关闭之后的回调函数
    alert('afterClose');                        
});
                    </code>
                </pre>
            </div>
            <h3>函数调用</h3>
            <div class="highlight">
                <pre>
                    <code data-lang="js" class="language-js">
//打开窗体
win.open();

//关闭窗体
win.close();

//强制关闭窗体
win.close(true);

//设置标题
win.setTitle('title');

//设置内容
win.setContent('content');

//设置按钮
win.setBtns([
    {
        text: '设置新按钮',
        action: 'test',
        className: 'k-btn-success',
        func: function () {
            alert('测试');
            this.close();
        }
    }
]);
                    </code>
                </pre>
            </div>
        </div>
    </div>

   


    <script type="text/javascript" src="vendor/require/require.js"></script>
    <script type="text/javascript" src="main.js"></script>
    <script type="text/javascript">



        function ok() {
            alert("ok");
        }

        function close() {
            alert("close");
        }

        function afterClose() {
            alert('afterClose');
        }

        var btns = [{
            text: '测试',
            action: 'test',
            className: 'k-btn-success',
            func: function () {
                alert('测试');
                this.close();
            }
        }];





        require(['KM'], function (KM) {

            KM.Window.Global();

            var win = new KM.Window({
                width: 600,
                title: '标题',
                content: '<h4>Overflowing text to show scroll behavior</h4><p>Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p><p>Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.</p><p>Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.</p><p>Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p><p>Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.</p><p>Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.</p><p>Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p><p>Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.</p><p>Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.</p>',
                //btns: [
                //    {
                //        text: '测试',
                //        action: 'test',
                //        className: 'k-btn-success',
                //        func: function () {
                //            alert('测试');
                //            this.close();
                //        }
                //    }
                //]
            });

            

            win.setBtns([
                {
                    text: '设置新按钮',
                    action: 'test',
                    className: 'k-btn-success',
                    func: function () {
                        alert('测试');
                    }
                }
            ]);

            win.on('ok', function () {
                alert("ok");
            });


            $(document.body).on('click', '[role=alert]', function () {
                KM.Window.alert('提示框', '警告提示', function () {
                    alert('回调');
                });
            }).on('click', '[role=confirm]', function () {
                KM.Window.confirm('确认对话框xxx', '您确认要XXXX吗？', function () {
                    alert('确认');
                }, function () {
                    alert('取消');
                });
            }).on('click', '[role=custom]', function () {
                win.open();
            });
        });
    </script>
</body>
</html>
